---
import { Image } from "astro:assets";
import SkillBadge from "./SkillBadge.astro";
import type { CollectionEntry } from "astro:content";

interface Props {
  project: CollectionEntry<"projects">;
}

const { project } = Astro.props;

function formatPeriod(startDate: Date, endDate?: Date) {
  const options: Intl.DateTimeFormatOptions = {
    month: "short",
    year: "numeric",
  };
  const start = startDate.toLocaleDateString("en-US", options);
  const end = endDate
    ? endDate.toLocaleDateString("en-US", options)
    : "Present";
  return `${start} - ${end}`;
}
---

<article class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow">
  <figure class="aspect-video">
    <Image
      src={project.data.image}
      alt={project.data.title}
      class="w-full h-full object-cover"
      width={600}
      height={400}
    />
  </figure>
  <div class="card-body">
    <h3 class="card-title text-primary">
      {project.data.title}
    </h3>
    <time class="text-sm text-base-content/60">
      {formatPeriod(project.data.startDate, project.data.endDate)}
    </time>
    <p class="text-base-content/80">{project.data.description}</p>
    <div class="flex flex-wrap gap-2 mt-2">
      {project.data.skills.map((skill) => <SkillBadge skill={skill} />)}
    </div>
  </div>
</article>
